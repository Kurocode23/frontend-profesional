<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  
  <main id="app"></main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.2/react.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.2/react-dom.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.23.1/babel.min.js"></script>
  <script type="text/babel">
    function Hola (props) {

      return (
        <h1 id="title" onClick={ props.onClick } onMouseEnter={ props.onMouseEnter }>
          Hola { props.name } {props.count}
        </h1>
      )
    }

    class MiComponente extends React.PureComponent {
      constructor (props) {
        super(props)

        this.handleClick = this.handleClick.bind(this)

        this.state = {
          count: 0,
        }
      }

      componentWillMount () {
        console.log('El componente se va a montar')
      }

      componentDidMount () {
        document.addEventListener('click', this.handleClick)
      }

      // componentWillReceiveProps (nextProps) {
      //   if (nextProps.name !== this.props.name) {
      //     this.setState({
      //       count: this.state.count * 2
      //     })
      //   }
      // }

      shouldComponentUpdate (nextProps, nextState) {
        if (nextState.count !== this.state.count) return true
        return false
      }

      componentWillUpdate () {
        console.log('el componente se va a actualizar')
      }

      componentDidUpdate () {
        console.log('el componente se ha actualizado')
      }

      componentWillUnmount () {
        document.removeEventListener('click', this.handleClick)
      }

      handleClick () {
        this.setState({
          count: this.state.count +1,
        })
      }

      handleMouseEnter (e) {
        console.log(e.target)
      }

      render () {
        const name = this.props.name
        return (
          <Hola name={this.props.name} count={this.state.count} onClick={this.handleClick} onMouseEnter={ this.handleMouseEnter }/>
        )
      }
    }

    ReactDOM.render( 
      <MiComponente name="Platzi" />,
      document.getElementById('app')
    )

    // Uncomment this to see componentWillReceiveProps
    // setTimeout(() => {
    //   ReactDOM.render( 
    //     <MiComponente name="Platzi Cambio!!!" />,
    //     document.getElementById('app')
    //   )
    // }, 5000)
  </script>
</body>
</html>